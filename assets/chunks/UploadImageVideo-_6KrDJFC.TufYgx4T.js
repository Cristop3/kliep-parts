import{bm as J}from"./kliep-tools.es.1-ATGZFN.js";import{M,X as R,J as Y,Y as Z,Z as G}from"../app.4LEgKytk.js";import{d as O,N as q,al as H,g as K,V as Q,y as S,D as n,aG as W,ah as ee,m as e,o as l,c as r,b as d,w as a,I as t,e as p,k as _,F as oe,t as le,r as ae,M as te,O as se}from"./framework.0_9lIZ6q.js";import"./theme.SbXruKJR.js";const ne={key:0,class:"upload-iv-thumb"},ie={class:"image-slot"},re={class:"upload-iv-upload__content"},de={key:0,class:"upload-iv-label"},ce=O({__name:"UploadImageVideo",props:{width:{default:"400px"},height:{default:"200px"},iconSize:{default:28},uploadType:{},limitSize:{default:50},screenFullLoading:{type:Boolean,default:!1},loadingType:{default:"progress"},btnLabel:{default:"上传图片"},showDownload:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},link:{type:Boolean},onSuccessCb:{},onErrorCb:{},onProgressCb:{},onChangeCb:{},onBeforeUploadCb:{},modelValueString:{},modelValueFiles:{}},emits:["update:modelValueString","update:modelValueFiles","fileChange"],setup(k,{emit:B}){const o=k,g=q("kd-upload"),{accept:m=`${o.uploadType}/*`}=H(),V=K(()=>o.loadingType==="loading"),z=()=>{c.value=[],h.value=""},i=B,{uploading:f,name:b,url:h,fullUrl:C,fileList:c,nativeFileList:F,uploadProgress:D,onSuccess:L,onError:U,onProgress:P,onChange:E,onBeforeUpload:$,funcDownloadFile:x,funcUpload2String:N}=J({accept:m,screenFullLoading:o.screenFullLoading,limitSize:o.limitSize,modelValueString:Q(()=>o.modelValueString),onSuccessCb:o.onSuccessCb,onErrorCb:o.onErrorCb,onProgressCb:o.onProgressCb,onChangeCb:o.onChangeCb,onBeforeUploadCb:o.onBeforeUploadCb,...g});return S(c,s=>{i("update:modelValueString",N(s)),i("fileChange")}),S(F,s=>{i("update:modelValueFiles",s),i("fileChange")}),(s,v)=>{const u=n("el-icon"),y=n("el-tooltip"),T=n("el-button"),I=n("el-image"),X=n("el-progress"),j=n("el-upload"),A=W("loading");return ee((l(),r("div",{class:"upload-iv",style:se({width:o.width,height:o.height})},[e(h)?(l(),r("div",ne,[o.showDownload?(l(),d(y,{key:0,content:`下载【${e(b)}】`,placement:"top-end"},{default:a(()=>[t(u,{class:"thumb-tools-download",size:14,onClick:v[0]||(v[0]=ue=>{var w;return e(x)((w=e(c))==null?void 0:w[0])})},{default:a(()=>[t(e(R))]),_:1})]),_:1},8,["content"])):p("",!0),o.showDelete?(l(),d(y,{key:1,content:`删除【${e(b)}】`,placement:"top-end"},{default:a(()=>[t(T,{icon:e(Y),circle:"",type:"danger",size:"small",class:"thumb-tools-delete",onClick:z},null,8,["icon"])]),_:1},8,["content"])):p("",!0),t(I,{class:"upload-iv-thumb__file",src:e(C),"preview-src-list":[e(C)]},{error:a(()=>[_("div",ie,[t(u,null,{default:a(()=>[t(e(Z))]),_:1})])]),_:1},8,["src","preview-src-list"])])):(l(),d(j,te({key:1,class:"upload-iv-upload",accept:e(m),"show-file-list":!1,action:e(g).uploadUrl,"on-success":e(L),"on-error":e(U),"on-progress":e(P),"on-change":e(E),"before-upload":e($)},{...s.$attrs}),{default:a(()=>[_("div",re,[e(f)?(l(),d(X,{key:1,type:"circle",percentage:e(D)},null,8,["percentage"])):(l(),r(oe,{key:0},[t(u,{class:"upload-iv-icon",size:o.iconSize},{default:a(()=>[t(e(G))]),_:1},8,["size"]),o.btnLabel?(l(),r("p",de,le(o.btnLabel),1)):p("",!0)],64))])]),tip:a(()=>[ae(s.$slots,"tip",{},void 0,!0)]),_:3},16,["accept","action","on-success","on-error","on-progress","on-change","before-upload"]))],4)),[[A,V.value?e(f):!1]])}}}),be=M(ce,[["__scopeId","data-v-15d92c20"]]);export{be as default};
