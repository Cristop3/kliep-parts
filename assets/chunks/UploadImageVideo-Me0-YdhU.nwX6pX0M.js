import{aT as q}from"./kliep-tools.es.tXOPW59Z.js";import{aA as H,aB as J,aC as M,aD as O,aE as X}from"./index-koLNZBF_.P7u8s2eW.js";import{d as Y,N as G,al as K,g as Q,V as W,y as S,D as n,az as Z,ad as ee,m as e,o as a,c as r,b as d,w as l,I as t,e as p,k as _,F as oe,t as ae,r as le,M as te,O as se}from"./framework.fC-vvecU.js";import"./index.zqm2yNl1.js";const ne={key:0,class:"upload-iv-thumb"},ie={class:"image-slot"},re={class:"upload-iv-upload__content"},de={key:0,class:"upload-iv-label"},ce=Y({__name:"UploadImageVideo",props:{width:{default:"400px"},height:{default:"200px"},iconSize:{default:28},uploadType:{},limitSize:{default:50},screenFullLoading:{type:Boolean,default:!1},loadingType:{default:"progress"},btnLabel:{default:"上传图片"},showDownload:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},link:{type:Boolean},onSuccessCb:{},onErrorCb:{},onProgressCb:{},onChangeCb:{},onBeforeUploadCb:{},modelValueString:{},modelValueFiles:{}},emits:["update:modelValueString","update:modelValueFiles","fileChange"],setup(k,{emit:B}){const o=k,g=G("kd-upload",()=>{}),{accept:m=`${o.uploadType}/*`}=K(),V=Q(()=>o.loadingType==="loading"),z=()=>{c.value=[],b.value=""},i=B,{uploading:f,name:h,url:b,fullUrl:C,fileList:c,nativeFileList:D,uploadProgress:F,onSuccess:L,onError:U,onProgress:E,onChange:P,onBeforeUpload:T,funcDownloadFile:$,funcUpload2String:x}=q({accept:m,screenFullLoading:o.screenFullLoading,limitSize:o.limitSize,modelValueString:W(()=>o.modelValueString),onSuccessCb:o.onSuccessCb,onErrorCb:o.onErrorCb,onProgressCb:o.onProgressCb,onChangeCb:o.onChangeCb,onBeforeUploadCb:o.onBeforeUploadCb,...g});return S(c,s=>{i("update:modelValueString",x(s)),i("fileChange")}),S(D,s=>{i("update:modelValueFiles",s),i("fileChange")}),(s,v)=>{const u=n("el-icon"),y=n("el-tooltip"),N=n("el-button"),I=n("el-image"),A=n("el-progress"),j=n("el-upload"),R=Z("loading");return ee((a(),r("div",{class:"upload-iv",style:se({width:o.width,height:o.height})},[e(b)?(a(),r("div",ne,[o.showDownload?(a(),d(y,{key:0,content:`下载【${e(h)}】`,placement:"top-end"},{default:l(()=>[t(u,{class:"thumb-tools-download",size:14,onClick:v[0]||(v[0]=ue=>{var w;return e($)((w=e(c))==null?void 0:w[0])})},{default:l(()=>[t(e(J))]),_:1})]),_:1},8,["content"])):p("",!0),o.showDelete?(a(),d(y,{key:1,content:`删除【${e(h)}】`,placement:"top-end"},{default:l(()=>[t(N,{icon:e(M),circle:"",type:"danger",size:"small",class:"thumb-tools-delete",onClick:z},null,8,["icon"])]),_:1},8,["content"])):p("",!0),t(I,{class:"upload-iv-thumb__file",src:e(C),"preview-src-list":[e(C)]},{error:l(()=>[_("div",ie,[t(u,null,{default:l(()=>[t(e(O))]),_:1})])]),_:1},8,["src","preview-src-list"])])):(a(),d(j,te({key:1,class:"upload-iv-upload",accept:e(m),"show-file-list":!1,action:e(g).uploadUrl,"on-success":e(L),"on-error":e(U),"on-progress":e(E),"on-change":e(P),"before-upload":e(T)},{...s.$attrs}),{default:l(()=>[_("div",re,[e(f)?(a(),d(A,{key:1,type:"circle",percentage:e(F)},null,8,["percentage"])):(a(),r(oe,{key:0},[t(u,{class:"upload-iv-icon",size:o.iconSize},{default:l(()=>[t(e(X))]),_:1},8,["size"]),o.btnLabel?(a(),r("p",de,ae(o.btnLabel),1)):p("",!0)],64))])]),tip:l(()=>[le(s.$slots,"tip",{},void 0,!0)]),_:3},16,["accept","action","on-success","on-error","on-progress","on-change","before-upload"]))],4)),[[R,V.value?e(f):!1]])}}}),he=H(ce,[["__scopeId","data-v-a46f7829"]]);export{he as default};
