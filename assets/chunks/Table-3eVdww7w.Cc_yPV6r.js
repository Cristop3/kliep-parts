import{aa as xe,d as De,h as q,G as Me,a0 as ke,al as Re,ai as Ae,j as Fe,A as Ne,y as Te,z as Ee,D as W,aI as Le,o as j,c as x,k as R,n as oe,r as J,I as ie,m as ue,e as D,ak as He,b as A,w as G,F as Q,M as X,J as Ie,E as se,aD as Ue,av as Ve,at as qe,O as We,aO as Je,aP as Ge,P as Qe,a3 as Xe}from"./framework.oUV_62tH.js";import{G as Ye,P as fe}from"../app.9Rnp9Vql.js";import{h as ce,e as Ze,z as B,H as et,y as ee,V as tt,K as at,l as nt,F as Z,c as _e,N as rt,D as Pe,T as de,$ as N,a as lt,L as pe,O as ge,r as ot,b as it,m as ut,n as st,W as ve,B as be}from"./Uint8Array-LeCd-Zzf.1MEzJDur.js";import"./kliep-tools.es.nA_SJfqh.js";import"./theme.mz_XRuro.js";function ft(e){return e}var ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dt=/^\w*$/;function te(e,t){if(B(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||Pe(e)?!0:dt.test(e)||!ct.test(e)||t!=null&&e in Object(t)}var pt="Expected a function";function ae(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pt);var a=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=a.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return a.cache=o.set(i,u)||o,u};return a.cache=new(ae.Cache||ee),a}ae.Cache=ee;var gt=500;function vt(e){var t=ae(e,function(n){return a.size===gt&&a.clear(),n}),a=t.cache;return t}var bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/\\(\\)?/g,ht=vt(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(bt,function(a,n,i,o){t.push(i?o.replace(yt,"$1"):n||a)}),t});const mt=ht;function E(e,t){return B(e)?e:te(e,t)?[e]:mt(nt(e))}var St=1/0;function M(e){if(typeof e=="string"||Pe(e))return e;var t=e+"";return t=="0"&&1/e==-St?"-0":t}function ne(e,t){t=E(t,e);for(var a=0,n=t.length;e!=null&&a<n;)e=e[M(t[a++])];return a&&a==n?e:void 0}function wt(e,t,a){var n=e==null?void 0:ne(e,t);return n===void 0?a:n}var _t="__lodash_hash_undefined__";function Pt(e){return this.__data__.set(e,_t),this}function Ct(e){return this.__data__.has(e)}function T(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new ee;++t<a;)this.add(e[t])}T.prototype.add=T.prototype.push=Pt;T.prototype.has=Ct;function Ot(e,t){for(var a=-1,n=e==null?0:e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}function jt(e,t){return e.has(t)}var $t=1,Bt=2;function Ce(e,t,a,n,i,o){var u=a&$t,r=e.length,l=t.length;if(r!=l&&!(u&&l>r))return!1;var s=o.get(e),d=o.get(t);if(s&&d)return s==t&&d==e;var g=-1,p=!0,v=a&Bt?new T:void 0;for(o.set(e,t),o.set(t,e);++g<r;){var h=e[g],S=t[g];if(n)var P=u?n(S,h,g,t,e,o):n(h,S,g,e,t,o);if(P!==void 0){if(P)continue;p=!1;break}if(v){if(!Ot(t,function($,w){if(!jt(v,w)&&(h===$||i(h,$,a,n,o)))return v.push(w)})){p=!1;break}}else if(!(h===S||i(h,S,a,n,o))){p=!1;break}}return o.delete(e),o.delete(t),p}function zt(e){var t=-1,a=Array(e.size);return e.forEach(function(n,i){a[++t]=[i,n]}),a}function Kt(e){var t=-1,a=Array(e.size);return e.forEach(function(n){a[++t]=n}),a}var xt=1,Dt=2,Mt="[object Boolean]",kt="[object Date]",Rt="[object Error]",At="[object Map]",Ft="[object Number]",Nt="[object RegExp]",Tt="[object Set]",Et="[object String]",Lt="[object Symbol]",Ht="[object ArrayBuffer]",It="[object DataView]",ye=ce?ce.prototype:void 0,Y=ye?ye.valueOf:void 0;function Ut(e,t,a,n,i,o,u){switch(a){case It:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ht:return!(e.byteLength!=t.byteLength||!o(new ve(e),new ve(t)));case Mt:case kt:case Ft:return st(+e,+t);case Rt:return e.name==t.name&&e.message==t.message;case Nt:case Et:return e==t+"";case At:var r=zt;case Tt:var l=n&xt;if(r||(r=Kt),e.size!=t.size&&!l)return!1;var s=u.get(e);if(s)return s==t;n|=Dt,u.set(e,t);var d=Ce(r(e),r(t),n,i,o,u);return u.delete(e),d;case Lt:if(Y)return Y.call(e)==Y.call(t)}return!1}var Vt=1,qt=Object.prototype,Wt=qt.hasOwnProperty;function Jt(e,t,a,n,i,o){var u=a&Vt,r=be(e),l=r.length,s=be(t),d=s.length;if(l!=d&&!u)return!1;for(var g=l;g--;){var p=r[g];if(!(u?p in t:Wt.call(t,p)))return!1}var v=o.get(e),h=o.get(t);if(v&&h)return v==t&&h==e;var S=!0;o.set(e,t),o.set(t,e);for(var P=u;++g<l;){p=r[g];var $=e[p],w=t[p];if(n)var k=u?n(w,$,p,t,e,o):n($,w,p,e,t,o);if(!(k===void 0?$===w||i($,w,a,n,o):k)){S=!1;break}P||(P=p=="constructor")}if(S&&!P){var z=e.constructor,_=t.constructor;z!=_&&"constructor"in e&&"constructor"in t&&!(typeof z=="function"&&z instanceof z&&typeof _=="function"&&_ instanceof _)&&(S=!1)}return o.delete(e),o.delete(t),S}var Gt=1,he="[object Arguments]",me="[object Array]",F="[object Object]",Qt=Object.prototype,Se=Qt.hasOwnProperty;function Xt(e,t,a,n,i,o){var u=B(e),r=B(t),l=u?me:pe(e),s=r?me:pe(t);l=l==he?F:l,s=s==he?F:s;var d=l==F,g=s==F,p=l==s;if(p&&ge(e)){if(!ge(t))return!1;u=!0,d=!1}if(p&&!d)return o||(o=new N),u||ot(e)?Ce(e,t,a,n,i,o):Ut(e,t,l,a,n,i,o);if(!(a&Gt)){var v=d&&Se.call(e,"__wrapped__"),h=g&&Se.call(t,"__wrapped__");if(v||h){var S=v?e.value():e,P=h?t.value():t;return o||(o=new N),i(S,P,a,n,o)}}return p?(o||(o=new N),Jt(e,t,a,n,i,o)):!1}function re(e,t,a,n,i){return e===t?!0:e==null||t==null||!de(e)&&!de(t)?e!==e&&t!==t:Xt(e,t,a,n,re,i)}var Yt=1,Zt=2;function ea(e,t,a,n){var i=a.length,o=i,u=!n;if(e==null)return!o;for(e=Object(e);i--;){var r=a[i];if(u&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++i<o;){r=a[i];var l=r[0],s=e[l],d=r[1];if(u&&r[2]){if(s===void 0&&!(l in e))return!1}else{var g=new N;if(n)var p=n(s,d,l,e,t,g);if(!(p===void 0?re(d,s,Yt|Zt,n,g):p))return!1}}return!0}function Oe(e){return e===e&&!Z(e)}function ta(e){for(var t=lt(e),a=t.length;a--;){var n=t[a],i=e[n];t[a]=[n,i,Oe(i)]}return t}function je(e,t){return function(a){return a==null?!1:a[e]===t&&(t!==void 0||e in Object(a))}}function aa(e){var t=ta(e);return t.length==1&&t[0][2]?je(t[0][0],t[0][1]):function(a){return a===e||ea(a,e,t)}}function na(e,t){return e!=null&&t in Object(e)}function ra(e,t,a){t=E(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var u=M(t[n]);if(!(o=e!=null&&a(e,u)))break;e=e[u]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&it(i)&&_e(u,i)&&(B(e)||ut(e)))}function la(e,t){return e!=null&&ra(e,t,na)}var oa=1,ia=2;function ua(e,t){return te(e)&&Oe(t)?je(M(e),t):function(a){var n=wt(a,e);return n===void 0&&n===t?la(a,e):re(t,n,oa|ia)}}function sa(e){return function(t){return t==null?void 0:t[e]}}function fa(e){return function(t){return ne(t,e)}}function ca(e){return te(e)?sa(M(e)):fa(e)}function da(e){return typeof e=="function"?e:e==null?ft:typeof e=="object"?B(e)?ua(e[0],e[1]):aa(e):ca(e)}function pa(e){return e===null}function ga(e){return e===void 0}function va(e,t,a,n){if(!Z(e))return e;t=E(t,e);for(var i=-1,o=t.length,u=o-1,r=e;r!=null&&++i<o;){var l=M(t[i]),s=a;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(i!=u){var d=r[l];s=n?n(d,l,r):void 0,s===void 0&&(s=Z(d)?d:_e(t[i+1])?[]:{})}rt(r,l,s),r=r[l]}return e}function ba(e,t,a){for(var n=-1,i=t.length,o={};++n<i;){var u=t[n],r=ne(e,u);a(r,u)&&va(o,E(u,e),r)}return o}function ya(e,t){if(e==null)return{};var a=tt(at(e),function(n){return[n]});return t=da(t),ba(e,a,function(n,i){return t(n,i[0])})}const ha=Object.prototype.hasOwnProperty,we=(e,t)=>ha.call(e,t),$e=e=>e!==null&&typeof e=="object",Be="__epPropKey",ma=e=>$e(e)&&!!e[Be],Sa=(e,t)=>{if(!$e(e)||ma(e))return e;const{values:a,required:n,default:i,type:o,validator:u}=e,r={type:o,required:!!n,validator:a||u?l=>{let s=!1,d=[];if(a&&(d=Array.from(a),we(e,"default")&&d.push(i),s||(s=d.includes(l))),u&&(s||(s=u(l))),!s&&d.length>0){const g=[...new Set(d)].map(p=>JSON.stringify(p)).join(", ");xe(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${g}], got value ${JSON.stringify(l)}.`)}return s}:void 0,[Be]:!0};return we(e,"default")&&(r.default=i),r},wa=["","default","small","large"],_a=Sa({type:String,values:wa,required:!1});var Pa={data:{type:Array,default:()=>[]},size:_a,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};const Ca={class:"table"},Oa={class:"table-main"},ja={class:"table-main-header__slot"},$a={key:0,class:"table-main-header__tools"},Ba=De({name:"kd-table",__name:"Table",props:{...Pa,height:{type:String,default:"100%"},rowKey:{type:String,default:"id"},emptyText:{type:String,default:"暂无数据"},tablePaginationByFrontend:{type:Boolean,default:!1},tableAutoRowIndexSort:{type:Boolean,default:!0},tableEnableTools:{type:Boolean,default:!0},tableSelectionNoAll:{type:Boolean,default:!1},tableDataRenderAgain:{type:Boolean,default:!1},tableData:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},tableRequestMethod:Function,tableFilterMethod:Function,tableAlignWhole:{type:String,default:"left"},tableHeaderAlign:{type:String,default:"left"},tableShowOverflowTooltip:{type:Boolean,default:!0},tablePagination:{type:Object},tableKey:{type:String,default:""},tableStyle:String},emits:["tableDataLoaded","tableDataRefreshed","tableDataRenderAgain","tableBeforeMount","tableMounted","tableUnmouted"],setup(e,{expose:t,emit:a}){var n,i,o;const u=Je(()=>Ge(()=>import("./ToolsBar-Mf6A1PYU.4ygL-0Sy.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),r=e,l={paginationCurrentPageKey:"pageNum",paginationPageSizeKey:"pageSize",paginationTotalKey:"total",paginationCurrentPage:1,paginationPageSize:30,paginationPosition:"right",paginationhidden:!1,paginationMt:10,paginationMb:!1,background:!0,small:!0,layout:"total, sizes, prev, pager, next, jumper",...r.tablePagination},s=q(!1),d=q(r.tableData?[...r.tableData.slice(0,l.paginationPageSize)]:[]),g=Me([]),p=q();r.tableColumns.length?g.value=r.tableColumns:g.value=(i=(n=ke().tableColumns()[0].children)==null?void 0:n.filter(f=>{var c;return((c=f==null?void 0:f.type)==null?void 0:c.name)=="ElTableColumn"}))==null?void 0:i.map(f=>{const{props:c,children:b}=f,m={...c,columnHide:!1};return Ze(b==null?void 0:b.default)?{...m,columnChildren:b==null?void 0:b.default()}:B(b)?{...m,columnChildren:b}:{...m,columnChildren:[]}});const v=Re({[l.paginationCurrentPageKey]:l.paginationCurrentPage,[l.paginationPageSizeKey]:l.paginationPageSize,[l.paginationTotalKey]:((o=r.tableData)==null?void 0:o.length)||0});Ae(()=>{_("tableBeforeMount"),fe.on("filterSendQuery",h)}),Fe(()=>_("tableMounted")),Ne(()=>{_("tableUnmouted"),fe.off("filterSendQuery")});const h=f=>p.value={...f},S=f=>ya({...f},c=>!pa(c)&&!ga(c)&&c!==""),P=async(f="normal")=>{s.value=!0;let c={[l.paginationCurrentPageKey]:v[l.paginationCurrentPageKey],[l.paginationPageSizeKey]:v[l.paginationPageSizeKey]};f=="normal"&&(c={...c,...S(p.value)});try{const{tableList:b=[],total:m=0}=await(r.tableRequestMethod&&r.tableRequestMethod({...c}));r.tableDataRenderAgain?_("tableDataRenderAgain",{tableList:b,total:m},(C=[],K=0)=>w(C,K)):w(b,m)}finally{s.value=!1}},$=async(f,c,b,m)=>{s.value=!0;try{let C=b;r.tableFilterMethod&&(C=r.tableFilterMethod(b,m));const K=(C==null?void 0:C.length)||0,y=l.paginationhidden?C==null?void 0:C.slice(0):(C==null?void 0:C.slice((f-1)*c,f*c))||[];r.tableDataRenderAgain?_("tableDataRenderAgain",{tableList:y,total:K},(I=[],U=0)=>w(I,U)):w(y,K)}finally{s.value=!1}},w=async(f,c=0)=>{d.value=f,v[l.paginationTotalKey]=c,await Qe(),_("tableDataLoaded",f)},k=f=>{g.value=f.map(c=>{var b;return{...(b=g.value.filter(m=>m.label==c.label))==null?void 0:b[0],columnHide:c==null?void 0:c.hide}})},z=async(f="backend")=>{f=="backend"&&P(),f=="frontend"&&_("tableDataRefreshed",d.value)},_=a,le=Xe();t({tableRef:()=>{var f;return(f=le==null?void 0:le.proxy)==null?void 0:f.$refs[`tableRef${r.tableKey}`]},doRefresh:z});let L,H;return r.tablePaginationByFrontend?H=Te([()=>v[l.paginationCurrentPageKey],()=>v[l.paginationPageSizeKey],()=>r.tableData,p],([f,c,b,m])=>{$(f,c,b,m)},{deep:!0}):L=Ee(async()=>{P()},{flush:"post"}),r.tablePaginationByFrontend&&L&&L(),!r.tablePaginationByFrontend&&H&&H(),(f,c)=>{const b=W("el-table-column"),m=W("el-table"),C=W("el-pagination"),K=Le("loading");return j(),x("div",Ca,[R("div",Oa,[R("div",{class:oe(["table-main-header",f.$slots.tableHeader||r.tableEnableTools?"mb5":""])},[R("div",ja,[J(f.$slots,"tableHeader",{},void 0,!0)]),r.tableEnableTools?(j(),x("div",$a,[ie(ue(u),{"bar-setting-check-list":g.value.map(y=>({label:y.label,fixed:y.fixed})),onDynamicListUpdate:k},null,8,["bar-setting-check-list"])])):D("",!0)],2),He((j(),A(m,X({ref:`tableRef${r.tableKey}`},{...r,...f.$attrs},{style:r.tableStyle,class:r.tableSelectionNoAll?"table-selection__no--all":"",data:d.value}),{default:G(()=>[r.tableAutoRowIndexSort?(j(),A(b,{key:0,label:"序号",type:"index",width:"60",align:"center",index:y=>(v[l.paginationCurrentPageKey]-1)*v[l.paginationPageSizeKey]+y+1},null,8,["index"])):D("",!0),(j(!0),x(Q,null,se(g.value,({columnChildren:y,columnHide:I,columnSlot:U,...O},ze)=>(j(),x(Q,null,[I?D("",!0):(j(),A(b,X({key:ze},O,{showOverflowTooltip:O.showOverflowTooltip?O.showOverflowTooltip:r.tableShowOverflowTooltip,align:O.align?O.align:r.tableAlignWhole,"header-align":O.headerAlign?O.headerAlign:r.tableHeaderAlign}),qe({default:G(()=>[y!=null&&y.length?(j(!0),x(Q,{key:0},se(y,(V,Ke)=>(j(),A(Ie(V),{key:Ke}))),128)):D("",!0)]),_:2},[U?{name:"default",fn:G(V=>[J(f.$slots,`tableColumn${ue(et)((O==null?void 0:O.prop)||(O==null?void 0:O.property))}`,Ve(Ue(V)),void 0,!0)]),key:"0"}:void 0]),1040,["showOverflowTooltip","align","header-align"]))],64))),256))]),_:3},16,["style","class","data"])),[[K,s.value]]),J(f.$slots,"tableFooter",{},void 0,!0),l.paginationhidden?D("",!0):(j(),x("div",{key:0,style:We(`text-align: ${l.paginationPosition};${l.paginationStyle}`),class:oe(["table-main-pagination",l.paginationMt?`mt${l.paginationMt}`:"",l.paginationMb?`mb${l.paginationMb}`:"",l.paginationClass?l.paginationClass:""])},[R("span",null,[ie(C,X({...l,...f.$attrs},{"current-page":v[l.paginationCurrentPageKey],"onUpdate:currentPage":c[0]||(c[0]=y=>v[l.paginationCurrentPageKey]=y),"page-size":v[l.paginationPageSizeKey],"onUpdate:pageSize":c[1]||(c[1]=y=>v[l.paginationPageSizeKey]=y),total:v[l.paginationTotalKey]}),null,16,["current-page","page-size","total"])])],6))])])}}}),ka=Ye(Ba,[["__scopeId","data-v-fa924131"]]);export{ka as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/chunks/ToolsBar-Mf6A1PYU.4ygL-0Sy.js","assets/chunks/kliep-tools.es.nA_SJfqh.js","assets/app.9Rnp9Vql.js","assets/chunks/framework.oUV_62tH.js","assets/chunks/theme.mz_XRuro.js","assets/chunks/isBoolean-ACOet8D1.KxKfQU1l.js","assets/chunks/Uint8Array-LeCd-Zzf.1MEzJDur.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}