import{aR as q}from"./kliep-tools.es.xyHhDXbU.js";import{N as G,C as M,k as H}from"../app.cdJ9d2Bo.js";import{d as J,N as K,an as O,g as k,V as Q,y,D as n,o as s,c,I as t,w as r,m as e,t as v,a as W,r as S,b as w,e as V,M as X,F as Y,E as Z,k as u}from"./framework.LCg3wJ3y.js";import"./index.qOGCuxqV.js";import"./theme._MKYYKEf.js";const ee={class:"upload-list"},oe=["onClick"],le={class:"file-right"},ae=J({__name:"UploadList",props:{limitSize:{default:200},screenFullLoading:{type:Boolean,default:!1},loadingType:{default:"progress"},btnLabel:{default:"选择文件"},showDownload:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},link:{type:Boolean},onSuccessCb:{},onErrorCb:{},onProgressCb:{},onChangeCb:{},onBeforeUploadCb:{},modelValueString:{},modelValueFiles:{}},emits:["update:modelValueString","update:modelValueFiles","fileChange"],setup(B,{emit:F}){const o=B,g=K("kd-upload"),{accept:m}=O(),f=k(()=>o.loadingType==="loading"),_=k(()=>o.link?"上传":o.btnLabel),L=l=>{const p=[...d.value];p.splice(l,1),d.value=p},i=F,{uploading:C,fileList:d,nativeFileList:D,uploadProgress:U,onSuccess:$,onError:E,onProgress:N,onChange:P,onBeforeUpload:z,funcDownloadFile:x,funcUpload2String:T}=q({accept:m||"*",screenFullLoading:o.screenFullLoading,limitSize:o.limitSize,modelValueString:Q(()=>o.modelValueString),onSuccessCb:o.onSuccessCb,onErrorCb:o.onErrorCb,onProgressCb:o.onProgressCb,onChangeCb:o.onChangeCb,onBeforeUploadCb:o.onBeforeUploadCb,...g});return y(d,l=>{i("update:modelValueString",T(l)),i("fileChange")}),y(D,l=>{i("update:modelValueFiles",l),i("fileChange")}),(l,p)=>{const b=n("el-button"),R=n("el-progress"),j=n("el-upload"),A=n("el-icon"),I=n("el-tooltip");return s(),c("div",ee,[t(j,X({multiple:"",accept:e(m),action:e(g).uploadUrl,"show-file-list":!1,"on-success":e($),"on-error":e(E),"on-progress":e(N),"on-change":e(P),"before-upload":e(z)},{...l.$attrs}),{default:r(()=>[S(l.$slots,"default",{},()=>[t(b,{type:"primary",link:o.link,loading:f.value?e(C):!1},{default:r(()=>[W(v(_.value),1)]),_:1},8,["link","loading"])],!0)]),tip:r(()=>[S(l.$slots,"tip",{},void 0,!0),!f.value&&e(C)?(s(),w(R,{key:0,percentage:e(U),"stroke-width":4,striped:"","striped-flow":"",duration:10},null,8,["percentage"])):V("",!0)]),_:3},16,["accept","action","on-success","on-error","on-progress","on-change","before-upload"]),(s(!0),c(Y,null,Z(e(d),(a,h)=>(s(),c("div",{class:"upload-list--file mt10",key:`${a.url}_${h}`},[u("div",{class:"file-left",onClick:()=>o.showDownload&&e(x)(a)},[t(A,{style:{"margin-right":"6px"},size:16},{default:r(()=>[t(e(M))]),_:1}),u("span",null,v(a==null?void 0:a.name),1)],8,oe),u("div",le,[a!=null&&a.url&&l.$props.showDelete?(s(),w(I,{key:0,content:`删除【${a==null?void 0:a.name}】`,placement:"top-end"},{default:r(()=>[t(b,{icon:e(H),circle:"",type:"danger",size:"small",onClick:ne=>L(h)},null,8,["icon","onClick"])]),_:2},1032,["content"])):V("",!0)])]))),128))])}}}),pe=G(ae,[["__scopeId","data-v-1153032c"]]);export{pe as default};
