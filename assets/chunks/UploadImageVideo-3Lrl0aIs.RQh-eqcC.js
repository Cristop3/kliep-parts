import{aR as G}from"./kliep-tools.es.LP6p9N8X.js";import{N as M,C as O,$ as q,x as H,B as J}from"../app.QMUbpOuY.js";import{d as K,N as Q,an as W,g as X,V as Y,y as S,D as n,aG as Z,aj as ee,m as e,o as l,c as r,b as d,w as a,I as t,e as u,k as _,F as oe,t as le,r as ae,M as te,O as se}from"./framework.URa763XA.js";import"./index.UfSCTmkv.js";import"./theme.cz4nT2hu.js";const ne={key:0,class:"upload-iv-thumb"},ie={class:"image-slot"},re={class:"upload-iv-upload__content"},de={key:0,class:"upload-iv-label"},ce=K({__name:"UploadImageVideo",props:{width:{default:"400px"},height:{default:"200px"},iconSize:{default:28},uploadType:{},limitSize:{default:50},screenFullLoading:{type:Boolean,default:!1},loadingType:{default:"progress"},btnLabel:{default:"上传图片"},showDownload:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},link:{type:Boolean},onSuccessCb:{},onErrorCb:{},onProgressCb:{},onChangeCb:{},onBeforeUploadCb:{},modelValueString:{},modelValueFiles:{}},emits:["update:modelValueString","update:modelValueFiles","fileChange"],setup(k,{emit:B}){const o=k,g=Q("kd-upload",()=>{}),{accept:m=`${o.uploadType}/*`}=W(),V=X(()=>o.loadingType==="loading"),z=()=>{c.value=[],b.value=""},i=B,{uploading:f,name:h,url:b,fullUrl:C,fileList:c,nativeFileList:F,uploadProgress:D,onSuccess:L,onError:U,onProgress:$,onChange:x,onBeforeUpload:P,funcDownloadFile:E,funcUpload2String:N}=G({accept:m,screenFullLoading:o.screenFullLoading,limitSize:o.limitSize,modelValueString:Y(()=>o.modelValueString),onSuccessCb:o.onSuccessCb,onErrorCb:o.onErrorCb,onProgressCb:o.onProgressCb,onChangeCb:o.onChangeCb,onBeforeUploadCb:o.onBeforeUploadCb,...g});return S(c,s=>{i("update:modelValueString",N(s)),i("fileChange")}),S(F,s=>{i("update:modelValueFiles",s),i("fileChange")}),(s,v)=>{const p=n("el-icon"),y=n("el-tooltip"),T=n("el-button"),I=n("el-image"),j=n("el-progress"),R=n("el-upload"),A=Z("loading");return ee((l(),r("div",{class:"upload-iv",style:se({width:o.width,height:o.height})},[e(b)?(l(),r("div",ne,[o.showDownload?(l(),d(y,{key:0,content:`下载【${e(h)}】`,placement:"top-end"},{default:a(()=>[t(p,{class:"thumb-tools-download",size:14,onClick:v[0]||(v[0]=pe=>{var w;return e(E)((w=e(c))==null?void 0:w[0])})},{default:a(()=>[t(e(O))]),_:1})]),_:1},8,["content"])):u("",!0),o.showDelete?(l(),d(y,{key:1,content:`删除【${e(h)}】`,placement:"top-end"},{default:a(()=>[t(T,{icon:e(q),circle:"",type:"danger",size:"small",class:"thumb-tools-delete",onClick:z},null,8,["icon"])]),_:1},8,["content"])):u("",!0),t(I,{class:"upload-iv-thumb__file",src:e(C),"preview-src-list":[e(C)]},{error:a(()=>[_("div",ie,[t(p,null,{default:a(()=>[t(e(H))]),_:1})])]),_:1},8,["src","preview-src-list"])])):(l(),d(R,te({key:1,class:"upload-iv-upload",accept:e(m),"show-file-list":!1,action:e(g).uploadUrl,"on-success":e(L),"on-error":e(U),"on-progress":e($),"on-change":e(x),"before-upload":e(P)},{...s.$attrs}),{default:a(()=>[_("div",re,[e(f)?(l(),d(j,{key:1,type:"circle",percentage:e(D)},null,8,["percentage"])):(l(),r(oe,{key:0},[t(p,{class:"upload-iv-icon",size:o.iconSize},{default:a(()=>[t(e(J))]),_:1},8,["size"]),o.btnLabel?(l(),r("p",de,le(o.btnLabel),1)):u("",!0)],64))])]),tip:a(()=>[ae(s.$slots,"tip",{},void 0,!0)]),_:3},16,["accept","action","on-success","on-error","on-progress","on-change","before-upload"]))],4)),[[A,V.value?e(f):!1]])}}}),be=M(ce,[["__scopeId","data-v-a46f7829"]]);export{be as default};
